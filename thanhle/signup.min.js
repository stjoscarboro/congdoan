var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var h=a[e];if(b.call(c,h,e,a))return{i:e,v:h}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6","es3");$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)$jscomp.owns(d,e)&&(a[e]=d[e])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");var $jscomp$destructuring$var0=require("../resources/js/angular-app.js"),app=$jscomp$destructuring$var0.app;require("../resources/js/parish-service.js");require("./signup.scss");
(function(){var a=function(b,a,d){b.init=function(){b.total=120;b.formData={};h();c()};b.submit=function(c){b.signupData=null;b.formData[c].date=c;var k=b.formData[c],f=b.signups.find(function(b){return b.date.getTime()===c.getTime()});if(f){var g=f.data.find(function(b){return b.email===k.email});g?Object.assign(g,d.pick(k,"name","count")):(g=d.pick(k,"name","email","count"),g.order=f.data.length+1,f.data.push(g));a.updateSignup(f).then(function(){b.signupData=k;location.hash="/summary"})}};b.formatDate=
function(b,a){var c=b.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});b=$.datepicker.formatDate("dd/mm/yy",b);return b+" @"+c+" "+(a?"- "+a.name:"")};b.getRemaining=function(a){var c=b.signups.find(function(b){return b.date.getTime()===a.getTime()}),d=b.total;c.data.forEach(function(b){d-=b.count||0});return d};b.checkSignup=function(a){var c=b.formData[a];c&&(b.signups.forEach(function(a){b.formData[a.date]={};Object.assign(b.formData[a.date],d.pick(c,"name","email"));a.data.forEach(function(b){b.name!==
c.name&&b.email!==c.email||Object.assign(c,d.pick(b,"name","email","count"))})}),b.signups.forEach(function(a){Object.assign(b.formData[a.date],d.pick(c,"name","email"));a.data.forEach(function(c){c.email===b.formData[a.date].email&&Object.assign(b.formData[a.date],d.pick(c,"count"))})}))};var c=function(){a.loadSignups().then(function(a){b.signups=a;location.hash="/signup"})},h=function(){b.signups||c();window.onhashchange=function(a){b.signups&&/\/signup$/.test(a.newURL)&&b.$apply(function(){b.signupData&&
b.checkSignup(b.signupData.date)})}}};a.$inject=["$scope","ParishService","AppUtil"];app.controller("thanhle",a)})();(function(){var a=function(a,c){var b=location.pathname.split("/")[1];a.when("/summary",{templateUrl:"/"+b+"/thanhle/summary.html"}).when("/list",{templateUrl:"/"+b+"/thanhle/list.html"}).otherwise({templateUrl:"/"+b+"/thanhle/signup.html"});c.hashPrefix("")};a.$inject=["$routeProvider","$locationProvider"];app.config(a)})();
