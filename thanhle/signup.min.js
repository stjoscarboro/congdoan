var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,d){a instanceof String&&(a=String(a));for(var e=a.length,c=0;c<e;c++){var f=a[c];if(b.call(d,f,c,a))return{i:c,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,d,e){if(b){d=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var c=a[e];c in d||(d[c]={});d=d[c]}a=a[a.length-1];e=d[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6","es3");var $jscomp$destructuring$var0=require("../resources/js/angular-app.js"),app=$jscomp$destructuring$var0.app;require("../resources/js/parish-service.js");
require("./signup.scss");
(function(){var a=function(a,d){a.init=function(){a.total=120;a.formData={};c();b()};a.submit=function(f){a.signupData=null;a.formData[f].date=f;var b=a.formData[f],c=a.signups.find(function(a){return a.date.getTime()===f.getTime()});if(c){var e=c.items.find(function(a){return a.email===b.email});(e?d.updateSignup(e.refId,b):d.createSignup(b)).then(function(){e?e.count=b.count:c.items.push(b);a.signupData=b;location.hash="#!/summary"})}};a.formatDate=function(a,b){a=$.datepicker.formatDate("dd/mm/yy",a);
return""+a+(b?" - "+b:"")};a.getRemaining=function(b){var d=a.signups.find(function(a){return a.date.getTime()===b.getTime()}),c=a.total;d.items.forEach(function(a){c-=a.count});return c};var b=function(){d.loadSignups().then(function(b){a.signups=b})},c=function(){a.signups||(location.hash="#!/signup",history.pushState(null,document.title,location.href));window.onhashchange=function(b){a.signups&&/\/signup$/.test(b.newURL)&&a.$apply(function(){a.signups.forEach(function(b){a.formData[b.date]={}})})}}};
a.$inject=["$scope","ParishService"];app.controller("thanhle",a)})();(function(){var a=function(a){var b=location.pathname.split("/")[1];a.when("/summary",{templateUrl:"/"+b+"/thanhle/summary.html"}).otherwise({templateUrl:"/"+b+"/thanhle/signup.html"})};a.$inject=["$routeProvider"];app.config(a)})();
