var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,b,g){if(c){b=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var h=a[g];h in b||(b[h]={});b=b[h]}a=a[a.length-1];g=b[a];c=c(g);c!=g&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,b){var c=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var h=c.length,f=a.length;b=Math.max(0,Math.min(b|0,c.length));for(var d=0;d<f&&b<h;)if(c[b++]!=a[d++])return!1;return d>=f}},"es6","es3");var $jscomp$destructuring$var0=require("./angular-app.js"),app=$jscomp$destructuring$var0.app,$jscomp$destructuring$var1=require("./airtable-secret.js"),__url=$jscomp$destructuring$var1.__url,__key=$jscomp$destructuring$var1.__key;
(function(){var a=function(a,b,g){return{getData:function(b,f,d){var e=a.defer(),c=[],h=function(d,e){var k=a.defer();g({url:d+(e?"&offset="+e:""),method:"GET"}).then(function(a){(a.data.records||(a.data?[a.data]:[])).forEach(function(a){var d={refId:a.id};f.tables[b].fields.forEach(function(b){switch(!0){case b.startsWith("date"):var e=new Date(Date.parse(a.fields[b]));e.setTime(e.getTime()+6E4*e.getTimezoneOffset());d[b]=e;break;case Array.isArray(a.fields[b]):d[b]=a.fields[b][0];break;default:d[b]=
a.fields[b]?""+a.fields[b]:""}});c.push(d)});a.data.offset?h(d,a.data.offset).then(function(){k.resolve()}):k.resolve()},function(a){k.reject(a.error)});return k.promise};h(__url+"/"+b+(d?"/"+d:"")+"?api_key="+__key).then(function(){c.sort(function(a,b){return parseInt(a.id)-parseInt(b.id)});e.resolve(c)},function(a){console.log(a)});return e.promise},createData:function(c,f){var d=a.defer();b({url:__url+"/"+c+"?api_key="+__key,method:"POST",data:f}).then(function(a){d.resolve(a.data)},function(a){console.log("Error: "+
a.error)});return d.promise},updateData:function(c,f,d){var e=a.defer();b({url:__url+"/"+c+"/"+f+"?api_key="+__key,method:"PUT",data:d}).then(function(a){e.resolve(a.data)},function(a){console.log("Error: "+a.error)});return e.promise},deleteData:function(c,f){var d=a.defer();b({url:__url+"/"+c+"/"+f+"?api_key="+__key,method:"DELETE"}).then(function(a){d.resolve(a.data)},function(a){console.log("Error: "+a.error)});return d.promise},sortByLocale:function(a,b){a&&a.sort(function(a,c){a="object"===
typeof a&&b?a[b]:a;c="object"===typeof c&&b?c[b]:c;return a&&c?a.localeCompare(c):0})}}};a.$inject=["$q","$http","DelayHttp"];app.factory("AirtableService",a)})();
